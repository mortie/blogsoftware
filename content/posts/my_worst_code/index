<p>Someone called Xeomorpher made a <a href="http://openredstone.org/forums/showthread.php?tid=685">thread on the Open Redstone Engineers forum</a> (more about ORE some time later), asking what people&#8217;s worst pieces of code were. I wrote a response, which I might aswerll post here too:</p>

<p><a href="http://mortie.org/?webapp=tequilaJumper">TequilaJumper!</a><br />
Made for Ludum Dare with minimal amounts of experience, it&#8217;s not of my prettiest of works. It did however spawn some offspring in the form of xeo&#8217;s TofuJumper.</p>

<p>Because of open sourceness, the source code can be found here: <a href="https://github.com/mortie/tequilaJumper">https://github.com/mortie/tequilaJumper</a></p>

<p>So, let&#8217;s have a look at it shall we?</p>

<p>You don&#8217;t even have to look at any of the source code to find the first horrible decision. Everything in one file. One index.html, containing almost 800 lines of source code. Yeeah.</p>

<p>Opening the file, we see some disastrous code. Take for instance this draw code :[line 218]</p>

<blockquote><p>gameCtx.fillStyle = "rgba(0, 0, 0, 0.5";</p>

<p>gameCtx.beginPath();</p>

<p>gameCtx.moveTo(Math.floor(platformStartX[i] + platformWidth[i]/2), Math.floor(drawYModifier(platformStartY[i] + platformHeight[i]/2, 0)));</p>

<p>gameCtx.lineTo(Math.floor(platformEndX[i] + platformWidth[i]/2), Math.floor(drawYModifier(platformEndY[i] + platformHeight[i]/2, 0)));</p>

<p>gameCtx.stroke();</p>
</blockquote>

<p>Beautiful innit? That was the code for drawing lines marking the path of moving platforms (play the game for yourself, and you&#8217;ll see what I mean).</p>

<p>This one-liner is quite extraordinary too:[line 271]</p>

<blockquote>gameCtx.fillRect (Math.floor(platformX[i]), Math.floor(drawYModifier(platformY[i], platformHeight[i])), Math.floor(platformWidth[i]), Math.floor(platformHeight[i]));</blockquote>

<p>Yeeah, that&#8217;s one line. Believe it or not.</p>

<p>In the code for handling the movement of platforms (which is a complex mess of work too by the way, starting at line 283 and ending at 349): [line 324]</p>

<blockquote><p>//HAAAAAACK!</p>

<p>platformMovementInvertedX[i] = platformMovementInvertedY[i];</p>
</blockquote>

<p>Encountered a bug I didn&#8217;t manage to fix, so I simply hacked my way around it using an extremely dirty trick.</p>

<p>Another thing, which isn&#8217;t as clearly expressed in the code, but maybe is worst of them all:<br />
When a platform is disappearing off of the screen, it doesn&#8217;t really disappear. It&#8217;s still stored in memory &#8211; it doesn&#8217;t get overwritten by new platforms. This leads to a horrible memory leak. That&#8217;s right. Platforms never despawn.</p>

<p>That&#8217;s a selection of the worst parts of the code. Other ineresting areas are:</p>

<ul>
<li>character controls [line 411]</li>
<li>collision detection [line 451]</li>
<li>hack to get the player to stick to the platform [line 511]</li>
<li>init [line 685]</li>
</ul>
<p>Oh, and I almost forgot:<br />
Almost all variables are global. Just look at the variable declaration part [line 7-73] :S</p>

<p>In my defence, it _was_ made for Ludum Dare, AND I attended a party which took most of my weekend. The time was therefore short. It also kinda feels wonderful to hack away on code, not spending a single thought on structure, and just see where you end up. The code becomes extremely horrible and unreadable, but it&#8217;s still fun ;P</p>
